: freadline-loop
  1 2 pick fread
  dup
  ord 10 =
  if
    free
  else
    free
    freadline-loop
  endif
;

: freadline
  # put a fpointer on the stack
  dup ftell
  freadline-loop
  over ftell over -
  -rot 0 2 pick fseek
  tuck fread
;
