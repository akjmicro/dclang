"dsp.dc" import

make-delay-line mydelay
mydelay init-delay-line
make-biquad mybq

: delay-filter

  noise
  0.3 0.3 gate 0.4 *
  *
  mybq false 260 0.4 biquad-lp 0.4 *
  # filtered noise fed into a delay line resonator
  mydelay 0.0129 delay-read 0.99999 *
  2dup
  +
  0.5 panmix
  stereo-out
  # mix for delay-write
  + 0.975 *
  mydelay delay-write
  t+
  delay-filter
;

delay-filter
